<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chem-How Pro: Полная версия</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main-blue: #1e3a8a; --accent-blue: #3b82f6; --bg-gray: #f8fafc; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg-gray); display: flex; min-height: 100vh; }

        /* САЙДБАР */
        .sidebar { width: 260px; background: linear-gradient(180deg, var(--main-blue) 0%, #1e40af 100%); color: white; position: fixed; height: 100vh; padding: 20px 0; }
        .nav-item { padding: 15px 25px; cursor: pointer; display: flex; align-items: center; gap: 15px; transition: 0.3s; }
        .nav-item:hover, .nav-item.active { background: rgba(255,255,255,0.15); border-left: 5px solid #60a5fa; }

        .main-content { flex: 1; margin-left: 260px; padding: 30px; }
        .section { display: none; animation: fadeIn 0.4s; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* ЛАБОРАТОРИЯ */
        .lab-grid { display: grid; grid-template-columns: 1fr 1.3fr; gap: 20px; }
        .card { background: white; border-radius: 15px; padding: 25px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .reagents-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .reagent-btn { background: #f1f5f9; border: 1px solid #cbd5e1; padding: 12px 5px; border-radius: 8px; cursor: pointer; font-size: 0.8rem; font-weight: bold; }
        .reagent-btn:hover { border-color: var(--accent-blue); background: #eff6ff; }

        .test-tube-area { display: flex; flex-direction: column; align-items: center; }
        .test-tube { width: 70px; height: 200px; border: 3px solid #334155; border-top: none; border-radius: 0 0 35px 35px; position: relative; overflow: hidden; background: #fff; margin: 20px 0; }
        .liquid { position: absolute; bottom: 0; width: 100%; height: 0%; transition: 0.6s ease; }
        .precipitate { position: absolute; bottom: 0; width: 100%; height: 0%; transition: 1s ease; opacity: 0; }

        .indicator-panel { display: flex; gap: 8px; margin-bottom: 15px; }
        .ind-btn { padding: 5px 12px; border: none; border-radius: 15px; color: white; cursor: pointer; font-size: 0.75rem; font-weight: bold; }

        .equations-display { width: 100%; background: #1e293b; color: #94a3b8; padding: 15px; border-radius: 10px; font-family: 'Courier New', monospace; font-size: 0.8rem; margin-top: 15px; line-height: 1.4; }
        .equations-display b { color: #38bdf8; }

        /* ГАЛОГЕНЫ */
        .hal-periodic-grid { display: grid; grid-template-columns: repeat(2, 180px); gap: 20px; justify-content: center; margin-top: 40px; }
        .hal-card { background: white; border: 2px solid #cbd5e1; border-radius: 10px; padding: 20px; text-align: center; cursor: pointer; transition: 0.3s; position: relative; }
        .hal-card:hover { border-color: var(--accent-blue); transform: scale(1.05); }
        .hal-symbol { font-size: 2.5rem; font-weight: bold; color: var(--main-blue); }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: white; padding: 30px; border-radius: 20px; max-width: 500px; width: 90%; }

        /* Квантовые ячейки */
        .quantum-row { display: flex; gap: 10px; margin-top: 20px; align-items: center; }
        .cell { width: 40px; height: 40px; border: 2px solid #334155; display: flex; justify-content: center; align-items: center; font-size: 20px; position: relative; background: #fff; }
        .cell::after { content: ''; position: absolute; width: 100%; height: 100%; }

        /* ТАБЛИЦА РАСТВОРИМОСТИ */
        .sol-table-container { overflow-x: auto; background: white; border-radius: 15px; padding: 10px; }
        .sol-table { width: 100%; border-collapse: collapse; font-size: 0.75rem; }
        .sol-table th, .sol-table td { border: 1px solid #e2e8f0; padding: 8px; text-align: center; }
        .sol-table th { background: var(--main-blue); color: white; }
        .r { background: #dcfce7; } .n { background: #fee2e2; }

        /* ТРЕНАЖЕР */
        .task-header { background: #fef3c7; border-left: 6px solid #f59e0b; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .click-info { display: flex; gap: 20px; margin: 15px 0; font-size: 0.9rem; }
        .click-pill { background: #e2e8f0; padding: 4px 10px; border-radius: 5px; }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div style="padding: 25px; font-size: 1.6rem; font-weight: bold;">Chem-How <i class="fas fa-atom"></i></div>
        <div class="nav-item active" onclick="showSection('lab')"><i class="fas fa-vial"></i> Лаборатория</div>
        <div class="nav-item" onclick="showSection('train')"><i class="fas fa-graduation-cap"></i> Тренажер</div>
        <div class="nav-item" onclick="showSection('halogens')"><i class="fas fa-th"></i> Галогены</div>
        <div class="nav-item" onclick="showSection('solubility')"><i class="fas fa-table"></i> Растворимость</div>
    </nav>

    <main class="main-content">
        <section id="lab" class="section active">
            <h2>Интерактивная лаборатория</h2>
            <div class="lab-grid">
                <div class="card">
                    <div id="lab-reagents" class="reagents-grid"></div>
                </div>
                <div class="card test-tube-area">
                    <div class="indicator-panel">
                        <button class="ind-btn" style="background:#818cf8" onclick="addIndicator('litmus')">Лакмус</button>
                        <button class="ind-btn" style="background:#f472b6" onclick="addIndicator('phen')">Фенолфталеин</button>
                        <button class="ind-btn" style="background:#fb923c" onclick="addIndicator('orange')">Метилоранж</button>
                    </div>
                    <div class="test-tube">
                        <div id="liq" class="liquid" style="background: rgba(226, 232, 240, 0.4);"></div>
                        <div id="prec" class="precipitate"></div>
                    </div>
                    <div id="lab-status" style="font-weight:bold; color:#475569;">Выберите первый реагент</div>
                    <div id="lab-eq" class="equations-display" style="display:none;"></div>
                    <button onclick="resetLab()" style="margin-top:20px; padding:10px 20px; background:#ef4444; color:white; border:none; border-radius:8px; cursor:pointer;">Очистить всё</button>
                </div>
            </div>
        </section>

        <section id="train" class="section">
            <div class="task-header">
                <h3>Задание: Свойства амфотерных соединений</h3>
                <p>Добавьте <b>AlCl₃</b>, а затем проведите реакцию со щелочью <b>NaOH</b>.</p>
                <div class="click-info">
                    <span class="click-pill"><b>1 клик:</b> Недостаток</span>
                    <span class="click-pill"><b>2 клика:</b> Норма</span>
                    <span class="click-pill"><b>3 клика:</b> Избыток</span>
                </div>
            </div>
            <div class="lab-grid">
                <div class="card">
                    <button class="reagent-btn" onclick="trainAdd('AlCl3')">AlCl3 (Хлорид алюминия)</button>
                    <button class="reagent-btn" onclick="trainAdd('NaOH')" style="margin-top:10px;">NaOH (Гидроксид натрия)</button>
                </div>
                <div class="card test-tube-area">
                    <div class="test-tube">
                        <div id="t-liq" class="liquid" style="background: rgba(226, 232, 240, 0.4);"></div>
                        <div id="t-prec" class="precipitate"></div>
                    </div>
                    <div id="t-status">Ожидание...</div>
                </div>
            </div>
        </section>

        <section id="halogens" class="section">
            <h2>Галогены (Группа VIIA)</h2>
            <div class="hal-periodic-grid">
                <div class="hal-card" onclick="openHal('F', 'Фтор', 'Газ светло-желтого цвета, самый сильный неметалл.', '2s² 2p⁵')">
                    <div class="hal-symbol">F</div><div>Фтор (9)</div>
                </div>
                <div class="hal-card" onclick="openHal('Cl', 'Хлор', 'Желто-зеленый газ с резким запахом.', '3s² 3p⁵')">
                    <div class="hal-symbol">Cl</div><div>Хлор (17)</div>
                </div>
                <div class="hal-card" onclick="openHal('Br', 'Бром', 'Красно-бурая тяжелая жидкость.', '4s² 4p⁵')">
                    <div class="hal-symbol">Br</div><div>Бром (35)</div>
                </div>
                <div class="hal-card" onclick="openHal('I', 'Иод', 'Темно-серые кристаллы с фиолетовым блеском.', '5s² 5p⁵')">
                    <div class="hal-symbol">I</div><div>Иод (53)</div>
                </div>
            </div>
        </section>

        <section id="solubility" class="section">
            <h2>Таблица растворимости</h2>
            <div class="sol-table-container card">
                
                <table class="sol-table">
                    <tr><th>Анионы/Катионы</th><th>H⁺</th><th>Na⁺</th><th>Ba²⁺</th><th>Cu²⁺</th><th>Al³⁺</th><th>Fe²⁺</th></tr>
                    <tr><td><b>OH⁻</b></td><td>-</td><td class="r">Р</td><td class="r">Р</td><td class="n">Н</td><td class="n">Н</td><td class="n">Н</td></tr>
                    <tr><td><b>Cl⁻</b></td><td class="r">Р</td><td class="r">Р</td><td class="r">Р</td><td class="r">Р</td><td class="r">Р</td><td class="r">Р</td></tr>
                    <tr><td><b>SO₄²⁻</b></td><td class="r">Р</td><td class="r">Р</td><td class="n">Н</td><td class="r">Р</td><td class="r">Р</td><td class="r">Р</td></tr>
                </table>
            </div>
        </section>
    </main>

    <div id="halModal" class="modal-overlay" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2 id="modalTitle"></h2>
            <p id="modalDesc" style="margin: 15px 0; color: #475569;"></p>
            <b>Электронное строение (внешний уровень):</b>
            <div id="modalFormula" style="margin: 10px 0; color: var(--accent-blue); font-weight: bold;"></div>
            
            <div class="quantum-row">
                <div class="cell">↑↓<span style="position:absolute; bottom:-18px; font-size:10px;">s-ячейка</span></div>
                <div style="width:20px;"></div>
                <div class="cell">↑↓</div>
                <div class="cell">↑↓</div>
                <div class="cell">↑<span style="position:absolute; bottom:-18px; font-size:10px;">p-ячейки</span></div>
            </div>
            <button onclick="closeModal()" style="margin-top:40px; width:100%; padding:10px; background:var(--main-blue); color:white; border:none; border-radius:10px; cursor:pointer;">Закрыть</button>
        </div>
    </div>

<script>
    const reagents = {
        'AlCl3': { name: 'Хлорид алюминия', type: 'salt' },
        'NaOH': { name: 'Гидроксид натрия', type: 'base' },
        'CuSO4': { name: 'Сульфат меди (II)', type: 'salt' },
        'HCl': { name: 'Соляная кислота', type: 'acid' },
        'BaCl2': { name: 'Хлорид бария', type: 'salt' },
        'Na2CO3': { name: 'Карбонат натрия', type: 'salt' }
    };

    let labSelected = [];
    let labCounts = {};

    function init() {
        const grid = document.getElementById('lab-reagents');
        Object.keys(reagents).forEach(k => {
            const b = document.createElement('button');
            b.className = 'reagent-btn';
            b.innerHTML = `${k}<br><small>${reagents[k].name}</small>`;
            b.onclick = () => labAdd(k);
            grid.appendChild(b);
        });
    }

    function labAdd(k) {
        labCounts[k] = (labCounts[k] || 0) + 1;
        if (!labSelected.includes(k)) labSelected.push(k);
        updateLab();
    }

    function updateLab() {
        const total = Object.values(labCounts).reduce((a,b)=>a+b,0);
        document.getElementById('liq').style.height = Math.min(total * 20, 90) + '%';
        const eq = document.getElementById('lab-eq');
        const prec = document.getElementById('prec');
        const status = document.getElementById('lab-status');

        if (labSelected.includes('AlCl3') && labSelected.includes('NaOH')) {
            const n = labCounts['NaOH'];
            eq.style.display = 'block';
            if (n === 1) {
                status.innerText = "1 Клик: Недостаток щелочи";
                prec.style.height = '15%'; prec.style.background = '#f1f5f9'; prec.style.opacity = '0.7';
                eq.innerHTML = "<b>Мол:</b> AlCl₃ + NaOH → Al(OH)Cl₂ + NaCl<br><b>СИУ:</b> Al³⁺ + OH⁻ → Al(OH)²⁺";
            } else if (n === 2) {
                status.innerText = "2 Клика: Норма (Полный осадок)";
                prec.style.height = '40%'; prec.style.opacity = '1';
                eq.innerHTML = "<b>Мол:</b> AlCl₃ + 3NaOH → Al(OH)₃↓ + 3NaCl<br><b>ПИУ:</b> Al³⁺ + 3Cl⁻ + 3Na⁺ + 3OH⁻ → Al(OH)₃↓ + 3Na⁺ + 3Cl⁻<br><b>СИУ:</b> Al³⁺ + 3OH⁻ → Al(OH)₃↓";
            } else if (n >= 3) {
                status.innerText = "3 Клика: Избыток щелочи (Растворение)";
                prec.style.height = '0';
                eq.innerHTML = "<b>Мол:</b> Al(OH)₃ + NaOH → Na[Al(OH)₄]<br><b>СИУ:</b> Al(OH)₃ + OH⁻ → [Al(OH)₄]⁻";
            }
        }
    }

    // ТРЕНАЖЕР
    let tState = { al: false, na: 0 };
    function trainAdd(k) {
        if (k === 'AlCl3') { tState.al = true; document.getElementById('t-liq').style.height = '30%'; }
        if (k === 'NaOH' && tState.al) {
            tState.na++;
            const pr = document.getElementById('t-prec');
            const st = document.getElementById('t-status');
            if (tState.na === 1) { pr.style.height = '20%'; pr.style.opacity = '0.6'; st.innerText = "Добавлен недостаток..."; }
            if (tState.na === 2) { pr.style.height = '40%'; pr.style.opacity = '1'; st.innerText = "Осадок выпал полностью."; }
            if (tState.na >= 3) { pr.style.height = '0'; st.innerHTML = "<b style='color:green'>Задание выполнено! Осадок растворен в избытке.</b>"; }
        }
    }

    function openHal(sym, name, desc, form) {
        document.getElementById('modalTitle').innerText = `${name} (${sym})`;
        document.getElementById('modalDesc').innerText = desc;
        document.getElementById('modalFormula').innerText = form;
        document.getElementById('halModal').style.display = 'flex';
    }

    function closeModal() { document.getElementById('halModal').style.display = 'none'; }

    function showSection(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function addIndicator(type) {
        const liq = document.getElementById('liq');
        if (type === 'litmus') liq.style.background = '#818cf8';
        if (type === 'phen') liq.style.background = '#f472b6';
        document.getElementById('lab-status').innerText = "Индикатор добавлен";
    }

    function resetLab() {
        labCounts = {}; labSelected = [];
        document.getElementById('liq').style.height = '0';
        document.getElementById('prec').style.height = '0';
        document.getElementById('lab-eq').style.display = 'none';
        tState = { al: false, na: 0 };
        document.getElementById('t-liq').style.height = '0';
        document.getElementById('t-prec').style.height = '0';
    }

    init();
</script>
</body>
</html>
